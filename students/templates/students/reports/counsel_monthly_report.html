{% load student_tags %}

<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <title>Counsel Monthly Report</title>
  </head>
  <body>

  <div class="container">
      <div class="row py-4">
          <div class="text-center col-sm-12 col-md-12">
              <h2 style="text-transform: uppercase;">Admission Report for {{ report_month }} {{ date.year }}</h2>
              <h4>Report Verified By: {{ request.user.get_full_name }}</h4>
              <h4>Date: {{ date|date:"d/m/Y" }}</h4>
          </div>
          <div class="col-sm-12 col-md-12 mt-3">
              <!-- Applications -->
              <div class="mb-5">
                  <p class="bg-info text-light pl-4 py-1 mb-0">Total Application</p>
                  <table class="table table-striped">
                      <thead>
                          <tr>
                              <th scope="col">TOTAL</th>
                              <th scope="col">Online</th>
                              <th scope="col">On-visit/Call</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr>
                              <td>{{ total_applications }}</td>
                              <td>{{ online_applications }}</td>
                              <td>{{ offline_applications }}</td>
                          </tr>
                      </tbody>
                  </table>
              </div>

              <!-- Admissions -->
              <div class="mb-5">
                  <p class="bg-info text-light pl-4 py-1 mb-0">Total Admission</p>
                  <table class="table table-striped">
                      <thead>
                          <tr>
                              <th scope="col">TOTAL</th>
                              <th scope="col">Online</th>
                              <th scope="col">On-visit/Call</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr>
                              <td>{{ total_admissions }}</td>
                              <td>{{ total_admission_online }}</td>
                              <td>{{ total_admission_offline }}</td>
                          </tr>
                      </tbody>
                  </table>
              </div>

              <!-- By Department -->
              <div class="mb-5">
                  <p class="bg-info text-light pl-4 py-1 mb-0">Admission/Migration/NA By Department</p>
                  <table class="table table-striped">
                      <thead>
                          <tr>
                              <th scope="col">Department</th>
                              <th scope="col">Applications</th>
                              <th scope="col">Admission</th>
                              <th scope="col">Migrated From</th>
                              <th scope="col">Migrated To</th>
                              <th scope="col">Missed</th>
                          </tr>
                      </thead>
                      <tbody>
                          {% for dept_name, departmental_record in departmental_records.items %}
                              <tr>
                                  <th scope="row">{{ dept_name }}</th>
                                  <td>{{ departmental_record.applications_count }}</td>
                                  <td>{{ departmental_record.admission_count }}</td>
                                  <td>{{ departmental_record.migrated_from_count }}</td>
                                  <td>{{ departmental_record.migrated_to_count }}</td>
                                  <td>{{ departmental_record.missed }}</td>
                              </tr>
                          {% endfor %}
                      </tbody>
                  </table>
              </div>

              <!-- By City -->
              <div class="mb-5">
                  <p class="bg-info text-light pl-4 py-1 mb-0">Total Admission/Application by Cities</p>
                  <table class="table table-striped">
                      <thead>
                          <tr>
                              <th scope="col">SYL</th>
                              <th scope="col">City Name</th>
                              <th scope="col">Applications</th>
                              <th scope="col">Admission</th>
                          </tr>
                      </thead>
                      <tbody>
                          {% for zila, zila_record in zila_records.items %}
                              <tr>
                                  <th scope="row">{{ forloop.counter }}</th>
                                  <td>{{ zila }}</td>
                                  <td>{{ zila_record.application_count }}</td>
                                  <td>{{ zila_record.admission_count }}</td>
                              </tr>
                          {% endfor %}
                      </tbody>
                  </table>
              </div>

          </div>
      </div>
  </div>


  <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
  </body>
</html>